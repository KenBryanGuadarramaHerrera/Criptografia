<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Votar: {{ survey.title }}</title>
</head>
<body>
    <h1>Emitir Voto: **{{ survey.title }}**</h1>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p style="color: {{ 'green' if category == 'success' else 'red' }};">{{ message }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}
    
    <p>Selecciona una opciÃ³n y usa tu llave privada para firmar y asegurar tu voto.</p>

    <form method="POST" action="{{ url_for('voting.submit_vote') }}">
        <input type="hidden" name="survey_id" value="{{ survey.id }}">

        <h2>Opciones:</h2>
        {% for option in survey.options %}
            <div>
                <input type="radio" id="option_{{ option.id }}" name="option_id" value="{{ option.id }}" required>
                <label for="option_{{ option.id }}">**{{ option.text }}**</label>
            </div>
        {% endfor %}

        <hr>

        <h2>ðŸ”’ Firma de la Boleta</h2>
        <p>
            **Pega tu Llave Privada (el contenido del archivo .pem o .key) aquÃ­:**
        </p>
        <textarea name="private_key_pem" rows="10" cols="60" required 
                  placeholder="---BEGIN PRIVATE KEY---..."></textarea><br><br>

        <button type="submit" style="padding: 10px; background-color: #007bff; color: white; border: none;">
            Firmar y Emitir Voto
        </button>
    </form>
    
    <p style="margin-top: 20px;"><a href="{{ url_for('main.home') }}">Volver al Inicio</a></p>
</body>
</html>